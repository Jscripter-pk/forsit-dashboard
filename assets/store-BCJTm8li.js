import{K as a}from"./index-BSoGzdXA.js";const c="forsit-products-v1";function n(){try{const e=localStorage.getItem(c);if(e)return JSON.parse(e)}catch{}return[{id:1,name:"Laptop",description:"Electronics",price:1200,stock:3,image:"https://images.unsplash.com/photo-1517336714731-489689fd1ca8?auto=format&fit=facearea&w=40&h=40",sales:[1,1,1,0,0,0,0]},{id:2,name:"Book",description:"Books",price:40,stock:10,image:"https://images.unsplash.com/photo-1512820790803-83ca734da794?auto=format&fit=facearea&w=40&h=40",sales:[2,1,0,0,0,0,0]},{id:3,name:"Shirt",description:"Clothing",price:25,stock:2,image:"https://images.unsplash.com/photo-1512436991641-6745cdb1723f?auto=format&fit=facearea&w=40&h=40",sales:[1,0,0,0,0,0,0]},{id:4,name:"Phone",description:"Electronics",price:800,stock:7,image:"https://images.unsplash.com/photo-1511707171634-5f897ff02aa9?auto=format&fit=facearea&w=40&h=40",sales:[1,1,1,1,1,1,1]}]}const f=a("main",{state:()=>{const e=n(),r=e.length>0?Math.max(...e.map(o=>o.id))+1:1,s=Array.from(new Set(e.map(o=>o.description)));return{products:e,nextId:r,categories:s,selectedCategory:"",selectedRange:"monthly",search:"",sortBy:"name",sortAsc:!0,filterMinPrice:"",filterMaxPrice:"",filterInStock:!1}},getters:{totalOrders(e){return e.products.reduce((r,s)=>Array.isArray(s.sales)?r+s.sales.reduce((o,t)=>o+t,0):r,0)},totalRevenue(e){return e.products.reduce((r,s)=>Array.isArray(s.sales)?r+s.sales.reduce((o,t)=>o+t,0)*s.price:r,0)},filteredProducts(e){let r=e.products;e.selectedCategory&&(r=r.filter(t=>t.description===e.selectedCategory)),e.search&&(r=r.filter(t=>t.name.toLowerCase().includes(e.search.toLowerCase())||t.description.toLowerCase().includes(e.search.toLowerCase())));const s=e.filterMinPrice!==""&&e.filterMinPrice!==null?parseFloat(e.filterMinPrice):null,o=e.filterMaxPrice!==""&&e.filterMaxPrice!==null?parseFloat(e.filterMaxPrice):null;return s!==null&&!isNaN(s)&&(r=r.filter(t=>parseFloat(t.price)>=s)),o!==null&&!isNaN(o)&&(r=r.filter(t=>parseFloat(t.price)<=o)),e.filterInStock&&(r=r.filter(t=>t.stock>0)),r=r.sort((t,i)=>e.sortBy==="name"?e.sortAsc?t.name.localeCompare(i.name):i.name.localeCompare(t.name):e.sortBy==="description"?e.sortAsc?t.description.localeCompare(i.description):i.description.localeCompare(t.description):e.sortBy==="stock"?e.sortAsc?t.stock-i.stock:i.stock-t.stock:e.sortBy==="price"?e.sortAsc?t.price-i.price:i.price-t.price:0),r},lowStockProducts(e){return e.products.filter(r=>r.stock<5)}},actions:{forecast(e){if(!e||!Array.isArray(e.sales)||e.sales.length===0)return"";const r=e.sales.reduce((s,o)=>s+o,0)/e.sales.length;if(r>0){const s=Math.floor(e.stock/r);if(s<7)return`Forecast: ${s} days left`}return""},addProduct(e){this.products.push(e),this.categories.includes(e.description)||this.categories.push(e.description),this.saveProducts()},updateStock(e,r){const s=this.products.find(o=>o.id===e.id);s&&(s.stock=r),this.saveProducts()},saveProducts(){try{localStorage.setItem(c,JSON.stringify(this.products))}catch{}},setSort(e){this.sortBy===e?this.sortAsc=!this.sortAsc:(this.sortBy=e,this.sortAsc=!0)}}});export{f as u};
