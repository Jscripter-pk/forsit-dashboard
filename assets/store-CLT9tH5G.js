import{J as i}from"./index-B4ZK9ph3.js";const c="forsit-products-v1";function a(){try{const e=localStorage.getItem(c);if(e)return JSON.parse(e)}catch{}return[{id:1,name:"Laptop",description:"Electronics",price:1200,stock:3,image:"https://images.unsplash.com/photo-1517336714731-489689fd1ca8?auto=format&fit=facearea&w=40&h=40",sales:[1,1,1,0,0,0,0]},{id:2,name:"Book",description:"Books",price:40,stock:10,image:"https://images.unsplash.com/photo-1512820790803-83ca734da794?auto=format&fit=facearea&w=40&h=40",sales:[2,1,0,0,0,0,0]},{id:3,name:"Shirt",description:"Clothing",price:25,stock:2,image:"https://images.unsplash.com/photo-1512436991641-6745cdb1723f?auto=format&fit=facearea&w=40&h=40",sales:[1,0,0,0,0,0,0]},{id:4,name:"Phone",description:"Electronics",price:800,stock:7,image:"https://images.unsplash.com/photo-1511707171634-5f897ff02aa9?auto=format&fit=facearea&w=40&h=40",sales:[1,1,1,1,1,1,1]}]}const d=i("main",{state:()=>{const e=a(),t=e.length>0?Math.max(...e.map(r=>r.id))+1:1,s=Array.from(new Set(e.map(r=>r.description)));return{products:e,nextId:t,categories:s,selectedCategory:"",selectedRange:"monthly",search:"",sortBy:"name",sortAsc:!0}},getters:{totalOrders(e){return e.products.reduce((t,s)=>Array.isArray(s.sales)?t+s.sales.reduce((r,o)=>r+o,0):t,0)},totalRevenue(e){return e.products.reduce((t,s)=>Array.isArray(s.sales)?t+s.sales.reduce((r,o)=>r+o,0)*s.price:t,0)},filteredProducts(e){let t=e.products;return e.selectedCategory&&(t=t.filter(s=>s.description===e.selectedCategory)),e.search&&(t=t.filter(s=>s.name.toLowerCase().includes(e.search.toLowerCase())||s.description.toLowerCase().includes(e.search.toLowerCase()))),t=t.sort((s,r)=>e.sortBy==="name"?e.sortAsc?s.name.localeCompare(r.name):r.name.localeCompare(s.name):e.sortBy==="description"?e.sortAsc?s.description.localeCompare(r.description):r.description.localeCompare(s.description):e.sortBy==="stock"?e.sortAsc?s.stock-r.stock:r.stock-s.stock:e.sortBy==="price"?e.sortAsc?s.price-r.price:r.price-s.price:0),t},lowStockProducts(e){return e.products.filter(t=>t.stock<5)}},actions:{forecast(e){if(!e||!Array.isArray(e.sales)||e.sales.length===0)return"";const t=e.sales.reduce((s,r)=>s+r,0)/e.sales.length;if(t>0){const s=Math.floor(e.stock/t);if(s<7)return`Forecast: ${s} days left`}return""},addProduct(e){this.products.push(e),this.categories.includes(e.description)||this.categories.push(e.description),this.saveProducts()},updateStock(e,t){const s=this.products.find(r=>r.id===e.id);s&&(s.stock=t),this.saveProducts()},saveProducts(){try{localStorage.setItem(c,JSON.stringify(this.products))}catch{}},setSort(e){this.sortBy===e?this.sortAsc=!this.sortAsc:(this.sortBy=e,this.sortAsc=!0)}}});export{d as u};
